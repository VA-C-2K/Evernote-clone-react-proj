{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pathToArr = pathToArr;\nexports.getSlashStrPath = getSlashStrPath;\nexports.getDotStrPath = getDotStrPath;\nexports.combineReducers = combineReducers;\nexports.pathFromMeta = pathFromMeta;\nexports.updateItemInArray = updateItemInArray;\nexports.createReducer = createReducer;\nexports.preserveValuesFromState = preserveValuesFromState;\n\nvar _flatten2 = _interopRequireDefault(require(\"lodash/flatten\"));\n\nvar _trimStart2 = _interopRequireDefault(require(\"lodash/trimStart\"));\n\nvar _replace2 = _interopRequireDefault(require(\"lodash/replace\"));\n\nvar _pick2 = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _isBoolean2 = _interopRequireDefault(require(\"lodash/isBoolean\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction pathToArr(path) {\n  return path ? path.split(/\\//).filter(function (p) {\n    return !!p;\n  }) : [];\n}\n\nfunction getSlashStrPath(path) {\n  return (0, _trimStart2.default)((0, _replace2.default)(path, /[.]/g, '/'), '/');\n}\n\nfunction getDotStrPath(path) {\n  return pathToArr(path).join('.');\n}\n\nfunction combineReducers(reducers) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    return Object.keys(reducers).reduce(function (nextState, key) {\n      nextState[key] = reducers[key](state[key], action);\n      return nextState;\n    }, {});\n  };\n}\n\nfunction pathFromMeta(meta) {\n  if (!meta) {\n    throw new Error('Action meta is required to build path for reducers.');\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      storeAs = meta.storeAs;\n\n  if (storeAs) {\n    return doc ? [storeAs, doc] : [storeAs];\n  }\n\n  if (meta.path) {\n    return meta.path.split('/');\n  }\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to construct reducer path.');\n  }\n\n  var basePath = [collection || collectionGroup];\n\n  if (doc) {\n    basePath = [].concat(_toConsumableArray(basePath), [doc]);\n  }\n\n  if (!subcollections) {\n    return basePath;\n  }\n\n  var mappedCollections = subcollections.map(pathFromMeta);\n  return [].concat(_toConsumableArray(basePath), _toConsumableArray((0, _flatten2.default)(mappedCollections)));\n}\n\nfunction updateItemInArray(array, itemId, updateItemCallback) {\n  var matchFound = false;\n  var modified = Array.isArray(array) ? array.map(function (item) {\n    if (!item || item.id !== itemId) {\n      return item;\n    }\n\n    matchFound = true;\n    var updatedItem = updateItemCallback(item);\n    return updatedItem;\n  }) : [];\n\n  if (!matchFound) {\n    modified.push(updateItemCallback({\n      id: itemId\n    }));\n  }\n\n  return modified;\n}\n\nfunction createReducer(initialState, handlers) {\n  return function reducer() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action);\n    }\n\n    return state;\n  };\n}\n\nfunction preserveValuesFromState(state, preserveSetting, nextState) {\n  if ((0, _isBoolean2.default)(preserveSetting)) {\n    return nextState ? _objectSpread(_objectSpread({}, state), nextState) : state;\n  }\n\n  if (typeof preserveSetting === 'function') {\n    return preserveSetting(state, nextState);\n  }\n\n  if (Array.isArray(preserveSetting)) {\n    return (0, _pick2.default)(state, preserveSetting);\n  }\n\n  throw new Error('Invalid preserve parameter. It must be an Object or an Array.');\n}","map":{"version":3,"sources":["E:/evernote-clone_proj/node_modules/redux-firestore/es/utils/reducers.js"],"names":["Object","defineProperty","exports","value","pathToArr","getSlashStrPath","getDotStrPath","combineReducers","pathFromMeta","updateItemInArray","createReducer","preserveValuesFromState","_flatten2","_interopRequireDefault","require","_trimStart2","_replace2","_pick2","_isBoolean2","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","arr2","path","split","p","join","reducers","state","undefined","action","reduce","nextState","meta","Error","collection","collectionGroup","doc","subcollections","storeAs","basePath","concat","mappedCollections","map","array","itemId","updateItemCallback","matchFound","modified","item","id","updatedItem","initialState","handlers","reducer","hasOwnProperty","type","preserveSetting"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pathToArr = pathToArr;\nexports.getSlashStrPath = getSlashStrPath;\nexports.getDotStrPath = getDotStrPath;\nexports.combineReducers = combineReducers;\nexports.pathFromMeta = pathFromMeta;\nexports.updateItemInArray = updateItemInArray;\nexports.createReducer = createReducer;\nexports.preserveValuesFromState = preserveValuesFromState;\n\nvar _flatten2 = _interopRequireDefault(require(\"lodash/flatten\"));\n\nvar _trimStart2 = _interopRequireDefault(require(\"lodash/trimStart\"));\n\nvar _replace2 = _interopRequireDefault(require(\"lodash/replace\"));\n\nvar _pick2 = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _isBoolean2 = _interopRequireDefault(require(\"lodash/isBoolean\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction pathToArr(path) {\n  return path ? path.split(/\\//).filter(function (p) {\n    return !!p;\n  }) : [];\n}\n\nfunction getSlashStrPath(path) {\n  return (0, _trimStart2.default)((0, _replace2.default)(path, /[.]/g, '/'), '/');\n}\n\nfunction getDotStrPath(path) {\n  return pathToArr(path).join('.');\n}\n\nfunction combineReducers(reducers) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    return Object.keys(reducers).reduce(function (nextState, key) {\n      nextState[key] = reducers[key](state[key], action);\n      return nextState;\n    }, {});\n  };\n}\n\nfunction pathFromMeta(meta) {\n  if (!meta) {\n    throw new Error('Action meta is required to build path for reducers.');\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      storeAs = meta.storeAs;\n\n  if (storeAs) {\n    return doc ? [storeAs, doc] : [storeAs];\n  }\n\n  if (meta.path) {\n    return meta.path.split('/');\n  }\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to construct reducer path.');\n  }\n\n  var basePath = [collection || collectionGroup];\n\n  if (doc) {\n    basePath = [].concat(_toConsumableArray(basePath), [doc]);\n  }\n\n  if (!subcollections) {\n    return basePath;\n  }\n\n  var mappedCollections = subcollections.map(pathFromMeta);\n  return [].concat(_toConsumableArray(basePath), _toConsumableArray((0, _flatten2.default)(mappedCollections)));\n}\n\nfunction updateItemInArray(array, itemId, updateItemCallback) {\n  var matchFound = false;\n  var modified = Array.isArray(array) ? array.map(function (item) {\n    if (!item || item.id !== itemId) {\n      return item;\n    }\n\n    matchFound = true;\n    var updatedItem = updateItemCallback(item);\n    return updatedItem;\n  }) : [];\n\n  if (!matchFound) {\n    modified.push(updateItemCallback({\n      id: itemId\n    }));\n  }\n\n  return modified;\n}\n\nfunction createReducer(initialState, handlers) {\n  return function reducer() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action);\n    }\n\n    return state;\n  };\n}\n\nfunction preserveValuesFromState(state, preserveSetting, nextState) {\n  if ((0, _isBoolean2.default)(preserveSetting)) {\n    return nextState ? _objectSpread(_objectSpread({}, state), nextState) : state;\n  }\n\n  if (typeof preserveSetting === 'function') {\n    return preserveSetting(state, nextState);\n  }\n\n  if (Array.isArray(preserveSetting)) {\n    return (0, _pick2.default)(state, preserveSetting);\n  }\n\n  throw new Error('Invalid preserve parameter. It must be an Object or an Array.');\n}"]},"metadata":{},"sourceType":"script"}